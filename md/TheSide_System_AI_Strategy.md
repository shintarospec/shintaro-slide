# TheSide システム全体像 & AI活用戦略

**サービス名**: TheSide（ザ・サイド）  
**最終更新**: 2026-01-01  
**バージョン**: 3.0  
**対象読者**: 経営者、プロダクトマネージャー、エンジニア

---

## 📋 目次

1. [サービス概要](#サービス概要)
2. [システム全体フロー](#システム全体フロー)
3. [AI使用箇所とコスト](#ai使用箇所とコスト)
4. [コストシミュレーション](#コストシミュレーション)

**📌 詳細設計ドキュメント**:
- システムアーキテクチャ: [ARCHITECTURE.md](./ARCHITECTURE.md)
- API仕様: [API.md](./API.md)
- DeepBiz連携: [DEEPBIZ_INTEGRATION.md](./DEEPBIZ_INTEGRATION.md)

---

## 🎯 サービス概要

### TheSideとは

**TheSide（ザ・サイド）**は、企業の営業担当者向けに、**お問い合わせフォームへの自動送信**を支援するSaaSシステムです。

### 解決する課題

- **営業リストの作成**: DeepBiz APIから企業情報を自動取得
- **メッセージ作成**: AI自動カスタマイズ
- **フォーム送信**: ブラウザ自動化で完全自動送信
- **送信管理**: データベース一元管理

### ターゲットユーザー

- BtoB営業担当者
- 新規開拓を担当する営業部門
- スタートアップ・中小企業の経営者
- 営業代行会社

---

## � システム全体フロー

```
┌─────────────────────────────────────────────────────────────┐
│                    外部サービス連携                           │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │          DeepBiz API (企業分析)                       │  │
│  │  GET /api/v1/companies/{domain}/analysis              │  │
│  │                                                       │  │
│  │  🤖 Gemini 2.5 Flash-Lite                             │  │
│  │  ├─ 企業Web解析                                       │  │
│  │  ├─ 事業内容・強み・課題抽出                          │  │
│  │  └─ コスト: 0.12円/社（初回のみ）                    │  │
│  │                                                       │  │
│  │  💰 TheSide側コスト: 0円（DeepBiz側で処理）          │  │
│  └──────────────────────────────────────────────────────┘  │
└────────────────┬─────────────────────────────────────────────┘
                 │ REST API
                 ↓
┌─────────────────────────────────────────────────────────────┐
│                      TheSide System                          │
│                    VPS: さくらVPS 4G/8G/16G                  │
│                    コスト: 3,227〜12,100円/月                 │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ Step 1: 企業情報取得                                  │  │
│  │  DeepBiz API → 企業分析データ                        │  │
│  │  ❌ AI不使用（API呼び出しのみ）                      │  │
│  └──────────────────────────────────────────────────────┘  │
│                            ↓                                 │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ Step 2: テンプレート作成                              │  │
│  │                                                       │  │
│  │  🤖 GPT-4 Turbo                                       │  │
│  │  ├─ 商材情報 → 高品質テンプレート                    │  │
│  │  ├─ 頻度: 案件数のみ（月3〜10件）                    │  │
│  │  └─ コスト: 6.4円/案件                               │  │
│  │                                                       │  │
│  │  ✅ AI使用理由: テンプレート品質が全体の成果を左右   │  │
│  └──────────────────────────────────────────────────────┘  │
│                            ↓                                 │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ Step 3: メッセージカスタマイズ                        │  │
│  │                                                       │  │
│  │  🤖 Gemini 2.5 Flash                                  │  │
│  │  ├─ テンプレート × 企業情報 → パーソナライズ         │  │
│  │  ├─ 頻度: 企業数×案件数（月30,000〜150,000件）       │  │
│  │  └─ コスト: 0.013円/件                               │  │
│  │                                                       │  │
│  │  ✅ AI使用理由: 大量実行のためコスト最適化必須       │  │
│  └──────────────────────────────────────────────────────┘  │
│                            ↓                                 │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ Step 4: フォームマッピング (Phase 2実装予定)         │  │
│  │                                                       │  │
│  │  🤖 Gemini 2.5 Flash                                  │  │
│  │  ├─ フォーム構造 → 入力フィールドマッピング          │  │
│  │  ├─ 初回のみAI実行、2回目以降は学習済み使用          │  │
│  │  └─ コスト: 0.019円/社（初回のみ）                   │  │
│  │                                                       │  │
│  │  ✅ AI使用理由: 企業ごとに異なるフォーム構造に対応   │  │
│  └──────────────────────────────────────────────────────┘  │
│                            ↓                                 │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ Step 5: 自動送信                                      │  │
│  │                                                       │  │
│  │  Playwright + VNC                                     │  │
│  │  ├─ フォーム自動入力                                  │  │
│  │  ├─ 送信ボタンクリック                                │  │
│  │  └─ スクリーンショット保存                            │  │
│  │                                                       │  │
│  │  ❌ AI不使用（ブラウザ自動化のみ）                   │  │
│  └──────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

---

## 🤖 AI使用箇所とコスト

### コスト発生箇所マトリックス

| ステップ | AI使用 | 使用サービス | コスト | 必要性 |
|---------|--------|-------------|--------|--------|
| **企業情報取得** | ❌ 不要 | DeepBiz API | 0円 | API呼び出しのみ |
| **テンプレート作成** | ✅ **使用** | **GPT-4 Turbo** | **6.4円/案件** | **高品質テンプレートが成果を左右** |
| **メッセージカスタマイズ** | ✅ **使用** | **Gemini 2.5 Flash** | **0.013円/件** | **大量実行のためコスト最適化必須** |
| **フォームマッピング** | ✅ **使用** | **Gemini 2.5 Flash** | **0.019円/社（初回）** | **可変的なフォーム構造に対応** |
| **フォーム送信** | ❌ 不要 | Playwright | 0円 | ブラウザ自動化で対応可能 |

### AI処理フロー例（メッセージカスタマイズ）

```
【入力】
テンプレート: "貴社のような【業界】において、【課題】を..."
企業情報: {
  "name": "株式会社Example",
  "industry": "IT・ソフトウェア",
  "businessDescription": "中小企業向けクラウド勤怠管理..."
}

        ↓ 🤖 Gemini 2.5 Flash (0.007円)

【出力】
株式会社Example
ご担当者様

貴社が中小企業向けのクラウド型勤怠管理システムを開発・販売されていること、
拝見いたしました。IT業界において、特に中小企業のDX推進支援という
重要な役割を果たしておられることと存じます。

また、ROIの部分も無しで大丈夫です！
こちらのスタンスとしては、原価を戦略的且つ効率的に設計するのが役割です。現在、IT企業様の中には、営業活動の効率化に課題を...
```

**💰 コスト**: 0.013円/件

---

## 💰 システム全体のAIコスト

### 📊 シナリオ別コスト比較マトリックス（ハイブリッド構成：GPT-4 + Gemini Flash）

| 項目 | シナリオ1<br>**3万件/月** | シナリオ2<br>**6万件/月**<br>【推奨】 | シナリオ3<br>**15万件/月** |
|------|--------------------------|----------------------------------|---------------------------|
| **📋 基本設定** | | | |
| 企業数 | 10,000社 | 20,000社 | 50,000社 |
| 案件数 | 3案件 | 3案件 | 3案件 |
| 月間送信数 | 30,000件 | 60,000件 | 150,000件 |
| | | | |
| **🤖 AIコスト詳細** | | | |
| テンプレート作成（GPT-4）<br>3案件 × 6.4円 | 19.2円 | 19.2円 | 19.2円 |
| 文面カスタマイズ（Gemini）<br>送信数 × 0.013円 | 390円<br>(30,000件) | 780円<br>(60,000件) | 1,950円<br>(150,000件) |
| フォームマッピング（Gemini）<br>企業数 × 0.019円（初回のみ） | 190円<br>(10,000社) | 380円<br>(20,000社) | 950円<br>(50,000社) |
| **AIコスト小計** | **599円** | **1,179円** | **2,919円** |
| | | | |
| **🖥️ インフラコスト** | | | |
| VPSサーバー（さくらVPS 大阪）<br>スペック | 3,429円<br>(4G: 4Core/4GB/200GB) | 6,857円<br>(8G: 6Core/8GB/400GB) | 13,109円<br>(16G: 8Core/16GB/800GB) |
| 処理能力 | 日次約1,000件 | 日次約2,000件 | 日次約5,000件 |

**リージョン選択理由:**
- **大阪リージョンを選択**: フォーム送信のリアルタイム処理のため、ユーザーに近い位置が望ましい
- **コストと性能のバランス**: 石狩（¥3,227）より¥202/月高いが、東京（¥3,630）より¥201/月安い
- **レイテンシー**: 関西・関東からのアクセスで10-30ms程度の低レイテンシーを実現
| | | | |
| **💰 コストサマリー** | | | |
| **月額合計** | **4,028円** | **8,036円** | **16,028円** |
| **年額合計** | **48,336円** | **96,432円** | **192,336円** |
| **1件あたり単価** | **0.134円** | **0.134円** | **0.107円** |
| | | | |
| **📈 コスト構成比** | | | |
| AIコスト割合 | 14.9% | 14.7% | 18.2% |
| サーバーコスト割合 | 85.1% | 85.3% | 81.8% |
| | | | |
| **⚡ スケール効率** | | | |
| 基準比（シナリオ1） | 1.00倍（基準） | 2.00倍 | 3.98倍 |
| 企業数比 | 1.00倍 | 2.00倍 | 5.00倍 |
| **効率向上率** | **-** | **0%** | **+20.1%** |

**注記**:
- フォームマッピングは初回のみAI実行、2回目以降は学習済みマッピングを使用（無料）
- 企業分析コストは含まれていません（DeepBiz側で処理）
- VPSスペックは月間処理量に応じた推奨構成

---

### 💡 シナリオ選択ガイド

| シナリオ | 推奨対象 | 特徴 |
|---------|---------|------|
| **シナリオ1（3万件）** | スモールスタート、検証フェーズ | 月額4,028円、1万社対応 |
| **シナリオ2（6万件）** | **本格運用、バランス重視** | **月額8,036円、2万社対応** |
| **シナリオ3（15万件）** | 大規模展開、スケール重視 | 月額16,028円、1件単価0.107円 |

---

### 📊 参考: All Gemini Flash構成の場合

テンプレート作成もGemini Flashにした場合の比較（品質はやや低下）:

| 項目 | シナリオ1 | シナリオ2 | シナリオ3 |
|------|----------|----------|----------|
| テンプレート作成（Gemini）<br>3案件 × 0.045円 | 0.135円 | 0.135円 | 0.135円 |
| カスタマイズ（Gemini） | 390円 | 780円 | 1,950円 |
| フォームマッピング（Gemini） | 190円 | 380円 | 950円 |
| **AIコスト小計** | **580円** | **1,160円** | **2,900円** |
| VPSサーバー | 3,429円 | 6,857円 | 13,109円 |
| **月額合計** | **4,009円** | **8,017円** | **16,009円** |
| **ハイブリッドとの差額** | -19円 | -19円 | -19円 |

**結論**: 月19円の差で高品質GPT-4テンプレートが使える → **ハイブリッド構成推奨**

---

## 🚀 AI活用のコスト設計戦略

#### 1. **コスト構造の透明性**
   - 企業情報取得: DeepBiz API（0.023円/社）
   - テンプレート作成: GPT-4 Turbo（6.4円/案件）
   - メッセージカスタマイズ: Gemini 2.5 Flash（0.013円/件）
   - フォームマッピング: Gemini 2.5 Flash（0.019円/社）

#### 2. **月額運用コストの予測可能性**
   - 1万社 × 6案件（6万件）: 月額8,036円
   - 2万社 × 3案件（6万件）: 月額8,036円
   - 1件あたり0.134円の固定単価
   - AIコスト比率: 約15%（残り85%はインフラ）

#### 3. **スケールメリットの設計**
   - 案件数増加: AIコストは線形増加（予測容易）
   - 企業数固定: 企業分析・マッピングコストは定額
   - 5万社規模: 1件単価0.107円（20%削減効果）

#### 4. **品質維持のコスト最適化**
   - GPT-4使用: 高品質テンプレート（6.4円/案件）
   - Gemini Flash使用: 低コスト処理（0.013-0.023円）
   - ハイブリッド構成: 品質とコストの最適バランス

#### 5. **学習効果によるコスト削減**
   - フォームマッピング: 2回目以降無料
   - 学習データ蓄積: 長期的なコスト削減
   - 初期投資の回収: 継続利用でコスト効率向上

---

